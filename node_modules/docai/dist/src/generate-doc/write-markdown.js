import fs from 'fs';
import path from 'path';
import { getMarkdown } from './get-markdown.js';
import { getOutputFilePath } from './get-output-file-path.js';
import { ensureDirExists } from '../utils/file.js';
export function writeMarkdownFile(originalDir, config) {
    return async (inputFilePath) => {
        if (inputFilePath === '')
            throw new Error('No input file path provided');
        const codeContent = fs.readFileSync(inputFilePath, 'utf-8');
        const title = inputFilePath.split('/').pop()?.split('.')[0];
        if (title === undefined) {
            throw new Error('Error in inputFilePath, title is undefined');
        }
        const markdown = await getMarkdown(inputFilePath, codeContent, title, config.isMocked);
        const outputFilePath = getOutputFilePath(inputFilePath, originalDir, config.outputDir);
        ensureDirExists(path.dirname(outputFilePath));
        fs.writeFileSync(outputFilePath, markdown);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGUtbWFya2Rvd24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZ2VuZXJhdGUtZG9jL3dyaXRlLW1hcmtkb3duLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLElBQUksQ0FBQTtBQUNuQixPQUFPLElBQUksTUFBTSxNQUFNLENBQUE7QUFFdkIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFBO0FBQy9DLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDJCQUEyQixDQUFBO0FBQzdELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQTtBQUdsRCxNQUFNLFVBQVUsaUJBQWlCLENBQUMsV0FBbUIsRUFBRSxNQUFjO0lBQ25FLE9BQU8sS0FBSyxFQUFFLGFBQXFCLEVBQUUsRUFBRTtRQUNyQyxJQUFJLGFBQWEsS0FBSyxFQUFFO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFBO1FBRXhFLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQzNELE1BQU0sS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBRTNELElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRTtZQUN2QixNQUFNLElBQUksS0FBSyxDQUFDLDRDQUE0QyxDQUFDLENBQUE7U0FDOUQ7UUFFRCxNQUFNLFFBQVEsR0FBRyxNQUFNLFdBQVcsQ0FDaEMsYUFBYSxFQUNiLFdBQVcsRUFDWCxLQUFLLEVBQ0wsTUFBTSxDQUFDLFFBQVEsQ0FDaEIsQ0FBQTtRQUNELE1BQU0sY0FBYyxHQUFHLGlCQUFpQixDQUN0QyxhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sQ0FBQyxTQUFTLENBQ2pCLENBQUE7UUFFRCxlQUFlLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFBO1FBRTdDLEVBQUUsQ0FBQyxhQUFhLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQzVDLENBQUMsQ0FBQTtBQUNILENBQUMifQ==