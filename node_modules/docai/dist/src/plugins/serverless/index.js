import path from 'path';
import fs from 'fs';
import yaml from 'js-yaml';
export function getHandlerPaths(serverlessYmlPath, basePath = '') {
    const serverlessConf = yaml.load(fs.readFileSync(serverlessYmlPath, 'utf8'));
    const handlerPaths = [];
    for (const functionName in serverlessConf.functions) {
        const handler = serverlessConf.functions[functionName].handler;
        const removedHandler = handler.split('.handler')[0];
        const jsHandlerPath = path.resolve(basePath, removedHandler + '.js');
        const tsHandlerPath = path.resolve(basePath, removedHandler + '.ts');
        if (fs.existsSync(jsHandlerPath)) {
            handlerPaths.push(jsHandlerPath);
        }
        else if (fs.existsSync(tsHandlerPath)) {
            handlerPaths.push(tsHandlerPath);
        }
        else {
            throw new Error(`Handler not found: ${handler}`);
        }
    }
    return handlerPaths;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcGx1Z2lucy9zZXJ2ZXJsZXNzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sSUFBSSxNQUFNLE1BQU0sQ0FBQTtBQUN2QixPQUFPLEVBQUUsTUFBTSxJQUFJLENBQUE7QUFDbkIsT0FBTyxJQUFJLE1BQU0sU0FBUyxDQUFBO0FBVzFCLE1BQU0sVUFBVSxlQUFlLENBQzdCLGlCQUF5QixFQUN6QixXQUFtQixFQUFFO0lBRXJCLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQzlCLEVBQUUsQ0FBQyxZQUFZLENBQUMsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLENBQ3BCLENBQUE7SUFFeEIsTUFBTSxZQUFZLEdBQWEsRUFBRSxDQUFBO0lBRWpDLEtBQUssTUFBTSxZQUFZLElBQUksY0FBYyxDQUFDLFNBQVMsRUFBRTtRQUNuRCxNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQTtRQUM5RCxNQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBRW5ELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLGNBQWMsR0FBRyxLQUFLLENBQUMsQ0FBQTtRQUNwRSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxjQUFjLEdBQUcsS0FBSyxDQUFDLENBQUE7UUFFcEUsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxFQUFFO1lBQ2hDLFlBQVksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUE7U0FDakM7YUFBTSxJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDdkMsWUFBWSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQTtTQUNqQzthQUFNO1lBQ0wsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsT0FBTyxFQUFFLENBQUMsQ0FBQTtTQUNqRDtLQUNGO0lBRUQsT0FBTyxZQUFZLENBQUE7QUFDckIsQ0FBQyJ9